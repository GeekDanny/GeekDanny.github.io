<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>极客丹尼 - 每天进步一点</title><meta name="keywords" content="‘科技’"><meta name="author" content="Danny Song"><meta name="copyright" content="Danny Song"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="白羊男子 指尖微凉 一半明媚 一半忧伤">
<meta property="og:type" content="website">
<meta property="og:title" content="极客丹尼">
<meta property="og:url" content="https://broadgeek.com/page/2/index.html">
<meta property="og:site_name" content="极客丹尼">
<meta property="og:description" content="白羊男子 指尖微凉 一半明媚 一半忧伤">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/geekdanny/images/master/avatar.jpg">
<meta property="article:author" content="Danny Song">
<meta property="article:tag" content="‘科技’">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/geekdanny/images/master/avatar.jpg"><link rel="shortcut icon" href="https://raw.githubusercontent.com/geekdanny/images/master/kirito.ico"><link rel="canonical" href="https://broadgeek.com/page/2/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ma+Shan+Zheng" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2021-04-04 21:05:22'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="极客丹尼" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://raw.githubusercontent.com/geekdanny/images/master/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">36</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header" style="background-image: url('https://picture.zwc365.com/getbing.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">极客丹尼</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">极客丹尼</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://github.com/geekdanny" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:dhrsongcs@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/06/21/ab5f/" title="Design Patterns-Single Responsibility Principle">     <img class="post_bg" src="https://raw.githubusercontent.com/geekdanny/images/master/blog/gbkQcf.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Design Patterns-Single Responsibility Principle"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/06/21/ab5f/" title="Design Patterns-Single Responsibility Principle">Design Patterns-Single Responsibility Principle</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-06-21T19:52:27.000Z" title="发表于 2020-06-21 12:52:27">2020-06-21</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-06-21T19:52:27.000Z" title="更新于 2020-06-21 12:52:27">2020-06-21</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/">架构设计</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Design-Patterns/">Design Patterns</a></span></div><div class="content">Introduction
Design patters are common architecture approaches.  (是架构的设计的具体应用方法论)
Students in Software Engineering Major are usually requirde to take the design patterns in their 3rd year program.
Popularized by the Gang of Fours book, 1994 – Smalltalk &amp; C++
Translated to many OOP languages: C#, Jav


Course Structure
Creational (创建型)
Structual （结构型）
Behavioral （行为型）
About Me
Software Coach in 2012 Software Engineering Lab

The SOLID Design PrinciplesSOLID is an acronym which stands for the  ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/06/21/276b/" title="嵌入式架构师 重温">     <img class="post_bg" src="https://raw.githubusercontent.com/geekdanny/images/master/blog/PWwrZ0.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="嵌入式架构师 重温"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/06/21/276b/" title="嵌入式架构师 重温">嵌入式架构师 重温</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-06-21T16:18:52.000Z" title="发表于 2020-06-21 09:18:52">2020-06-21</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-06-21T16:18:52.000Z" title="更新于 2020-06-21 09:18:52">2020-06-21</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/">架构设计</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/C/">C++</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/C/">C</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Linux/">Linux</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Kernel/">Kernel</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Design-Patterns/">Design Patterns</a></span></div><div class="content">基础篇
 C.Primer.Plus (6th,2013.12）Stephen.Prata
 Primer c++ 第5版
 精品C语言 （视频）
 C语言进阶 （视频）
 C++深入浅出 （视频）
 精品汇编课程（视频）

中极篇
 Design Patterns in Modern C++： Book， 视频，Code
 c++系统工程师
 C++性能优化指南
 编写高质量代码：改善C++程序的150个建议
 Linux.Kernel.Fundamentals （视频）

高级篇
 Linux Kernel Development (3rd Edition)
 深入Linux内核架构
 Domain-Driven Design - Tackling Complexity in the Heart of Software-Eric Evans 2003 （领域驱动设计：软件核心复杂性应对之道）
 Implementing Domain-Driven Design-2013（实现领域驱动设计 （美）弗农著）
 架构整洁之道
 重构_改善既有代码的设计
 代码大全

专家篇
 linux ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/06/10/8d33/" title="GPU Mali">     <img class="post_bg" src="https://raw.githubusercontent.com/geekdanny/images/master/blog/Ucf7lZ.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GPU Mali"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/06/10/8d33/" title="GPU Mali">GPU Mali</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-06-10T20:20:26.000Z" title="发表于 2020-06-10 13:20:26">2020-06-10</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-06-10T20:20:26.000Z" title="更新于 2020-06-10 13:20:26">2020-06-10</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E5%9B%BE%E5%BD%A2%E6%8A%80%E6%9C%AF/">图形技术</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Mali/">Mali</a></span></div><div class="content">GPU 进化GPU 方面，最新发布 Mali-G77 GPU 采用了最新的 Valhall 架构，此时距离上一代 Bifronst 架构的发布已经有三年时间，之前的G71一直到G76用的都是BIFROST架构。

新架构带来了全新的ISA和计算核心设计，解决了Bifrost体系结构的主要缺点，性能提升 40%、效能提升 30%，性能密度提升 30%、机器学习性能提升 60%；按照官方的说法，Mail-G77 着力于在移动游戏方面的提升，同时也非常注重 AR 和 VR 方面的应用。
据称新Mali-G77 GPU的架构，可以让2019年末和2020年的手机GPU性能在工艺不变的情况下提升1.4倍。值得一提的是，Mail-G77 GPU 还可与新的 Mali-D77 显示处理器协同工作。

从分类来看，A77和A76同样基于ArmV8.2，也是属于华为获得永久授权的Armv8系列范围内，按道理说华为拥有自主研发和修改的权力。
从授权时间来看，SoC产品开发都有一定的流程，首先是原理方案研究，比如选定哪些技术，决定后才会进入产品设计，这时候就要签技术、架构IP授权。因此SoC厂商拿到新设计架 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/05/28/bda3/" title="如果失去华为，中国会怎样?">     <img class="post_bg" src="https://raw.githubusercontent.com/geekdanny/images/master/blog/cORXK2.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如果失去华为，中国会怎样?"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/05/28/bda3/" title="如果失去华为，中国会怎样?">如果失去华为，中国会怎样?</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-05-28T16:46:59.000Z" title="发表于 2020-05-28 09:46:59">2020-05-28</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-05-28T16:46:59.000Z" title="更新于 2020-05-28 09:46:59">2020-05-28</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%A7%91%E6%8A%80%E8%A7%82%E5%AF%9F/">科技观察</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%8A%AF%E7%89%87/">芯片</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E5%8D%8E%E4%B8%BA/">华为</a></span></div><div class="content">如果失去华为，中国会怎么样?关系到中国国运(组图)新闻来源: 肖磊看市 于2020-05-28 7:30:51 大字阅读 提示:新闻观点不代表本网立场
关于美国以倾国之力来猎杀华为这件事，我看到很多的讨论和分析，但总体来说偏悲观，大部分知识阶层认为中国跟美国在芯片领域的差距太大，美国这种近乎无耻的“无限追溯”，基本上就是“杀不死华为誓不罢休”的节奏，而同时认为中国可用的反制措施有限，从而得出一个结论，美国的强大超乎想象，不要再吹中国厉害了等等。
当然，乐观派也有很多，把美国对华为的猎杀，看成是一种倒逼的激励机制，一时间也激发了诸多科技工作者、消费者和创业者的情绪，这是一种比较好的现象。
但我要分析的角度，并不简单的是表明某种立场，因为华为的问题，不是一个简单的企业问题，美国已经将华为的问题，上升到了政治和国家安全的角度，这背后一定是有战略性考量的，中国一定要以同等的支持，来帮助华为脱困，这关系到能否保住中国改革开放成果的问题，也可以说关系到中国国运的问题（别着急反驳，听我慢慢说）。
1作为全球化的坚定支持者，我个人的消费观念是，谁率先占领我的视野和体验，我就会一直用谁家的东西，直到哪天 ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/05/25/3cd2/" title="Object-Relational Impedance Mismatch">     <img class="post_bg" src="https://raw.githubusercontent.com/geekdanny/images/master/blog/p3xogJ.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Object-Relational Impedance Mismatch"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/05/25/3cd2/" title="Object-Relational Impedance Mismatch">Object-Relational Impedance Mismatch</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-05-26T02:44:23.000Z" title="发表于 2020-05-25 19:44:23">2020-05-25</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-05-26T02:44:23.000Z" title="更新于 2020-05-25 19:44:23">2020-05-25</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/">架构设计</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Architecture/">Architecture</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Design/">Design</a></span></div><div class="content">Object-oriented technology supports the building of applications out of objects that have both data and behavior. Relational technologies support the storage of data in tables and manipulation of that data via data manipulation language (DML) internally within the database via stored procedures and externally via SQL calls. Some relational databases go further and now support objects internally as well, a trend that will only grow stronger over time. It is clear that object technologies and rela ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/05/25/417d/" title="Setup Android Work Environment">     <img class="post_bg" src="https://raw.githubusercontent.com/geekdanny/images/master/blog/oft9ZH.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Setup Android Work Environment"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/05/25/417d/" title="Setup Android Work Environment">Setup Android Work Environment</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-05-25T18:12:25.000Z" title="发表于 2020-05-25 11:12:25">2020-05-25</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-05-25T18:12:25.000Z" title="更新于 2020-05-25 11:12:25">2020-05-25</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/">编程技术</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Android/">Android</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83/">编译环境</a></span></div><div class="content">设置 Mac OS 编译环境在默认安装过程中，macOS 会在一个保留大小写但不区分大小写的文件系统中运行。Git 不支持这种类型的文件系统，而且此类文件系统会导致某些 Git 命令（如 git status）的行为出现异常。因此，我们建议您始终在区分大小写的文件系统中处理 AOSP 源代码文件。使用下文中介绍的磁盘映像可以非常轻松地做到这一点。
有了适当的文件系统，在新型 macOS 环境中编译 master 分支就会变得非常简单。要编译较早版本的分支，则需要一些额外的工具和 SDK。
创建区分大小写的磁盘映像您可以使用磁盘映像在现有的 macOS 环境中创建区分大小写的文件系统。要创建磁盘映像，请启动磁盘工具，然后选择 New Image。完成编译至少需要 25GB 空间；更大的空间能够更好地满足未来的增长需求。使用稀疏映像有助于节省空间，同时可以根据需要进行扩展。请选择 Case sensitive, Journaled 卷格式。
您也可以通过 shell 使用以下命令创建文件系统：
12hdiutil create -type SPARSE -fs &#x27;Case-sen ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/05/23/e277/" title="2020 中美爆发芯片战争">     <img class="post_bg" src="https://raw.githubusercontent.com/geekdanny/images/master/blog/kMSMLs.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2020 中美爆发芯片战争"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/05/23/e277/" title="2020 中美爆发芯片战争">2020 中美爆发芯片战争</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-05-23T18:51:50.000Z" title="发表于 2020-05-23 11:51:50">2020-05-23</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-05-23T18:51:50.000Z" title="更新于 2020-05-23 11:51:50">2020-05-23</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%A7%91%E6%8A%80%E8%A7%82%E5%AF%9F/">科技观察</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E8%8A%AF%E7%89%87/">芯片</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E5%8D%8E%E4%B8%BA/">华为</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E9%BA%92%E9%BA%9F/">麒麟</a></span></div><div class="content">
编者按：
180年前发生的那场鸦片战争，英国不道德地利用其军事优势来解决当时的贸易争端，打开了大清的国门。在鸦片战争近两百年后，西方文明现在又不得不准备与中国打一场「芯片战争」。最有讽刺意义的就是，「芯片战争」要解决的实质问题，和鸦片战争要解决的其实是同一个问题，那就是按照什么原则来发展不同文明之间的交往与合作。

分水岭2020年5月16日，美国商务部工业与安全局(BIS)突然宣布，将全面限制华为购买采用美国软件和技术生产的半导体，包括美国以外被列入管制清单的生产设备，在为华为和海思生产代工前，都要获得美国允许。
这意味着，由台积电为华为供货的芯片产业链，或将遭到全面封杀。中芯国际，将成为华为芯片最后的依靠。
虽然台积电做了否认，但美国的制裁，从放出消息开始显然已经箭在弦上。
此前的5月5日晚，中芯国际宣布将回归A股科创板上市，芯片股板块早已掀起一阵涨停潮。
但这家企业本身，却命运多舛。
2009年，中芯国际创始人张汝京因台积电起诉而下课，从而经历了一段没有技术主干的探索期。那时，中芯国际虽号称中国芯片巨头，但与国内同行的技术差距并不大。
2017年，神秘人物梁孟松加入中芯国际，企 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/05/18/156f/" title="Understanding the Android Compilation Process">     <img class="post_bg" src="https://raw.githubusercontent.com/geekdanny/images/master/blog/06xuWt.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Understanding the Android Compilation Process"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/05/18/156f/" title="Understanding the Android Compilation Process">Understanding the Android Compilation Process</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-05-18T20:08:29.000Z" title="发表于 2020-05-18 13:08:29">2020-05-18</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-05-18T20:08:29.000Z" title="更新于 2020-05-18 13:08:29">2020-05-18</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/">编程技术</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Android/">Android</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/Compilation/">Compilation</a></span></div><div class="content">
ObjectiveThe main objective of this blog post is to give you a clear idea about the Android compilation process which describes the stages through which your android application goes through when you build it.
Step 1 What you should know before starting Android Development?Are you new to Android?
Don’t worry! “I have got your back!!!” ;)
Any Android application has several building blocks. I will give you overview of
The Android’s component Architecture
The Android Runtime Environments - DALVIK ...</div></div></div><div class="recent-post-item"><div class="post_cover left_radius"><a href="/2020/05/17/bbe/" title="详解华为正在开发的操作系统">     <img class="post_bg" src="https://raw.githubusercontent.com/geekdanny/images/master/blog/eqOGjt.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="详解华为正在开发的操作系统"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/05/17/bbe/" title="详解华为正在开发的操作系统">详解华为正在开发的操作系统</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-05-17T21:44:20.000Z" title="发表于 2020-05-17 14:44:20">2020-05-17</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-05-17T21:44:20.000Z" title="更新于 2020-05-17 14:44:20">2020-05-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/%E5%8D%8E%E4%B8%BA/">华为</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E9%B8%BF%E8%92%99/">鸿蒙</a><span class="article-meta__link">•</span><a class="article-meta__tags" href="/tags/%E6%96%B9%E8%88%9F/">方舟</a></span></div><div class="content">
转文学城

读者按： 最近开始研究华为的系统，读了很多文章和代码，计划庖丁解牛的研究华为面临的问题。只有清晰的了解问题后，才可以对症下药。这篇文章有点意思，记录一下以做参考。

华为消费者业务总裁余承东在朋友圈说最快今年秋天，最晚明年春天，华为自己的操作系统（OS）将可能面市。华为的OS打通了手机、电脑、平板、电视、汽车、智能穿戴，统一成一个操作系统。且华为OS还兼容全部的安卓应用和所有的Web应用，相关安卓应用在华为OS上重新编译后，运行性能提升将超过60%。
据传这个操作系统叫鸿蒙。鸿蒙本意是中国神话中的在天地开辟之前，一团混沌的元气世界。很奇怪，为什么华为的OS叫鸿蒙。等待开辟？还是一团混沌？
余承东别号余大嘴，朋友圈的话算不上正式发布，双重不靠谱。
这位老总一定是把操作系统混同于华为宣传的方舟编译器了。以前华为宣布方舟编译器的终极目标，是推出一个跨平台、跨系统、跨设备多种语言的软件开发平台。操作系统包括的东东比一个编译平台多得多。工作量也大得多。能够跨系统写应用软件不等于一统江湖的跨设备的操作系统。
根据华为公开的信息，鸿蒙是一个基于安卓的，集成了华为对安卓系统的既往优化的操 ...</div></div></div><div class="recent-post-item"><div class="post_cover right_radius"><a href="/2020/05/17/b272/" title="Android Architecture">     <img class="post_bg" src="https://source.android.com/images/android_framework_details.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Android Architecture"></a></div><div class="recent-post-info"><a class="article-title" href="/2020/05/17/b272/" title="Android Architecture">Android Architecture</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-05-17T18:59:10.000Z" title="发表于 2020-05-17 11:59:10">2020-05-17</time><span class="article-meta__separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-05-17T18:59:10.000Z" title="更新于 2020-05-17 11:59:10">2020-05-17</time></span><span class="article-meta"><span class="article-meta__separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/Android/">Android</a></span></div><div class="content">Android is designed so that there’s no central point of failure, where one industry player restricts or controls the innovations of another. The result is a full, production-quality consumer product with source code open for customization and porting.

Platform ArchitectureAndroid is an open source, Linux-based software stack created for a wide array of devices and form factors. The following diagram shows the major components of the Android platform.

Figure 1. The Android software stack.
</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/#content-inner">3</a><a class="page-number" href="/page/4/#content-inner">4</a><a class="extend next" rel="next" href="/page/3/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://raw.githubusercontent.com/geekdanny/images/master/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Danny Song</div><div class="author-info__description">白羊男子 指尖微凉<br> 一半明媚 一半忧伤</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">34</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">36</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://raw.githubusercontent.com/geekdanny/images/master/wechat.jpg"><i class="fab fa-weixin"></i><span>微信</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/geekdanny" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:dhrsongcs@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">每天进步一点点</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/01/14/dc7f/" title="C++11 细节知识点"><img src="https://raw.githubusercontent.com/geekdanny/images/master/blog/C96pdz.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C++11 细节知识点"/></a><div class="content"><a class="title" href="/2021/01/14/dc7f/" title="C++11 细节知识点">C++11 细节知识点</a><time datetime="2021-01-14T18:09:52.000Z" title="更新于 2021-01-14 10:09:52">2021-01-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/12/2236/" title="Setup OpenGL Development with Clion on MacOS"><img src="https://raw.githubusercontent.com/geekdanny/images/master/blog/qiyvUd.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Setup OpenGL Development with Clion on MacOS"/></a><div class="content"><a class="title" href="/2021/01/12/2236/" title="Setup OpenGL Development with Clion on MacOS">Setup OpenGL Development with Clion on MacOS</a><time datetime="2021-01-12T19:06:07.000Z" title="更新于 2021-01-12 11:06:07">2021-01-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/12/2270/" title="Setup Vulkan Development Environment with Clion on MacOS"><img src="https://raw.githubusercontent.com/geekdanny/images/master/blog/FtU9D7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Setup Vulkan Development Environment with Clion on MacOS"/></a><div class="content"><a class="title" href="/2021/01/12/2270/" title="Setup Vulkan Development Environment with Clion on MacOS">Setup Vulkan Development Environment with Clion on MacOS</a><time datetime="2021-01-12T19:06:07.000Z" title="更新于 2021-01-12 11:06:07">2021-01-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/11/b21/" title="Vulkan 导读3: 分配Image资源和创建Swapchain"><img src="https://raw.githubusercontent.com/geekdanny/images/master/blog/image-20210111155306450.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vulkan 导读3: 分配Image资源和创建Swapchain"/></a><div class="content"><a class="title" href="/2021/01/11/b21/" title="Vulkan 导读3: 分配Image资源和创建Swapchain">Vulkan 导读3: 分配Image资源和创建Swapchain</a><time datetime="2021-01-11T23:18:14.000Z" title="更新于 2021-01-11 15:18:14">2021-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/11/7c7/" title="Vulkan 导读2: Command Buffer 和内存管理"><img src="https://raw.githubusercontent.com/geekdanny/images/master/blog/NFrL2w.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vulkan 导读2: Command Buffer 和内存管理"/></a><div class="content"><a class="title" href="/2021/01/11/7c7/" title="Vulkan 导读2: Command Buffer 和内存管理">Vulkan 导读2: Command Buffer 和内存管理</a><time datetime="2021-01-11T22:26:51.000Z" title="更新于 2021-01-11 14:26:51">2021-01-11</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-bolt"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%9B%BD%E9%99%85%E7%BB%8F%E6%B5%8E/"><span class="card-category-list-name">国际经济</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%9B%BE%E5%BD%A2%E6%8A%80%E6%9C%AF/"><span class="card-category-list-name">图形技术</span><span class="card-category-list-count">6</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E5%BC%80%E5%8F%91%E8%BF%90%E7%BB%B4/"><span class="card-category-list-name">开发运维</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><span class="card-category-list-name">操作系统</span><span class="card-category-list-count">3</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/"><span class="card-category-list-name">架构设计</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%A7%91%E6%8A%80%E8%A7%82%E5%AF%9F/"><span class="card-category-list-name">科技观察</span><span class="card-category-list-count">5</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E6%8A%80%E6%9C%AF/"><span class="card-category-list-name">编程技术</span><span class="card-category-list-count">6</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E8%8A%AF%E7%89%87/" style="font-size: 1.33em; color: rgb(21, 185, 138)">芯片</a><a href="/tags/%E5%8D%8E%E4%B8%BA/" style="font-size: 1.45em; color: rgb(169, 27, 112)">华为</a><a href="/tags/%E9%BA%92%E9%BA%9F/" style="font-size: 1.15em; color: rgb(14, 183, 102)">麒麟</a><a href="/tags/C/" style="font-size: 1.39em; color: rgb(171, 167, 70)">C++</a><a href="/tags/Android/" style="font-size: 1.27em; color: rgb(133, 81, 86)">Android</a><a href="/tags/C/" style="font-size: 1.21em; color: rgb(179, 187, 190)">C</a><a href="/tags/Linux/" style="font-size: 1.15em; color: rgb(31, 197, 132)">Linux</a><a href="/tags/Kernel/" style="font-size: 1.15em; color: rgb(162, 118, 5)">Kernel</a><a href="/tags/Design-Patterns/" style="font-size: 1.21em; color: rgb(141, 98, 85)">Design Patterns</a><a href="/tags/SIP/" style="font-size: 1.15em; color: rgb(126, 62, 86)">SIP</a><a href="/tags/Github/" style="font-size: 1.15em; color: rgb(42, 35, 109)">Github</a><a href="/tags/GoDaddy/" style="font-size: 1.15em; color: rgb(180, 175, 172)">GoDaddy</a><a href="/tags/Mali/" style="font-size: 1.15em; color: rgb(119, 77, 141)">Mali</a><a href="/tags/React/" style="font-size: 1.15em; color: rgb(120, 154, 178)">React</a><a href="/tags/Architecture/" style="font-size: 1.15em; color: rgb(121, 27, 76)">Architecture</a><a href="/tags/Design/" style="font-size: 1.15em; color: rgb(19, 63, 125)">Design</a><a href="/tags/Hexo/" style="font-size: 1.15em; color: rgb(34, 137, 192)">Hexo</a><a href="/tags/Yuque/" style="font-size: 1.15em; color: rgb(136, 59, 1)">Yuque</a><a href="/tags/Mac/" style="font-size: 1.15em; color: rgb(144, 187, 98)">Mac</a><a href="/tags/%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83/" style="font-size: 1.15em; color: rgb(49, 2, 70)">编译环境</a><a href="/tags/OpenGL/" style="font-size: 1.15em; color: rgb(181, 118, 48)">OpenGL</a><a href="/tags/Vulkan/" style="font-size: 1.33em; color: rgb(57, 117, 186)">Vulkan</a><a href="/tags/Spring/" style="font-size: 1.21em; color: rgb(2, 90, 1)">Spring</a><a href="/tags/Springboot/" style="font-size: 1.21em; color: rgb(10, 136, 65)">Springboot</a><a href="/tags/IntelliJ/" style="font-size: 1.15em; color: rgb(132, 199, 196)">IntelliJ</a><a href="/tags/Java/" style="font-size: 1.15em; color: rgb(139, 45, 115)">Java</a><a href="/tags/Framework/" style="font-size: 1.15em; color: rgb(16, 200, 29)">Framework</a><a href="/tags/Compilation/" style="font-size: 1.15em; color: rgb(137, 97, 124)">Compilation</a><a href="/tags/k8s/" style="font-size: 1.21em; color: rgb(15, 19, 180)">k8s</a><a href="/tags/ova/" style="font-size: 1.15em; color: rgb(148, 75, 120)">ova</a><a href="/tags/vmdk/" style="font-size: 1.15em; color: rgb(109, 156, 59)">vmdk</a><a href="/tags/ovftool/" style="font-size: 1.15em; color: rgb(160, 154, 155)">ovftool</a><a href="/tags/struct/" style="font-size: 1.15em; color: rgb(63, 76, 183)">struct</a><a href="/tags/%E4%B8%AD%E7%BE%8E%E5%AF%B9%E6%8A%97/" style="font-size: 1.21em; color: rgb(96, 1, 48)">中美对抗</a><a href="/tags/%E9%B8%BF%E8%92%99/" style="font-size: 1.15em; color: rgb(137, 73, 197)">鸿蒙</a><a href="/tags/%E6%96%B9%E8%88%9F/" style="font-size: 1.15em; color: rgb(67, 138, 128)">方舟</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/01/"><span class="card-archive-list-date">一月 2021</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/06/"><span class="card-archive-list-date">六月 2020</span><span class="card-archive-list-count">7</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/05/"><span class="card-archive-list-date">五月 2020</span><span class="card-archive-list-count">12</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/01/"><span class="card-archive-list-date">一月 2020</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2019/12/"><span class="card-archive-list-date">十二月 2019</span><span class="card-archive-list-count">7</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">34</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-04-16T07:00:00.000Z"></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">64.9k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2021-04-05T04:05:22.017Z"></div></div></div></div></div></div></main><footer id="footer" style="background: black"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By Danny Song</div><div class="footer_custom_text">回忆是一种重逢 遗忘是一种自由</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>function subtitleType () {
  fetch('https://v1.hitokoto.cn')
    .then(response => response.json())
    .then(data => {
      if (true) {
        var from = '出自 ' + data.from
        var sub = "".length == 0 ? new Array() : "".split(',')
        var both = sub.unshift(data.hitokoto, from)
        var typed = new Typed('#subtitle', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('subtitle').innerHTML = data.hitokoto
      }
    })
}

if (true) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/lib/typed.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const findTrueUrl = (array) => {
    Promise.all(array.map(item =>
      fetch(item.url).then(resp => resp.json()).then(data => {
        const urlArray = data.body.match(/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?/ig)
        if (data.user.login === 'utterances-bot') {
          return urlArray.pop()
        } else {
          return urlArray.shift()
        }
      })
    )).then(res => {
        array = array.map((i,index)=> {
          return {
            ...i,
            url: res[index]
          }
        })

        saveToLocal.set('github-newest-comments', JSON.stringify(array), 10/(60*24))
        generateHtml(array)
    });
  }

  const getComment = () => {
    fetch('https://api.github.com/repos/geekdanny/geek-comments/issues/comments?sort=updated&direction=desc&per_page=6&page=1',{
      "headers": {
        Accept: 'application/vnd.github.v3.html+json'
      }
    })
      .then(response => response.json())
      .then(data => {
        const githubArray = data.map(item => {
          return {
            'avatar': item.user.avatar_url,
            'content': changeContent(item.body_html),
            'nick': item.user.login,
            'url': item.issue_url,
            'date': item.updated_at,
            'githubUrl': item.html_url
          }
        })
        findTrueUrl(githubArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('github-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.9}});</script></body></html>